
Subject: re-init test case DSQL_DOMAIN_22
Date: Mon, 01 Nov 1999 15:12:04 -0800
From: Siok Bie Tie <stie@interbase.com>
To: Chris <cjewell@interbase.com>, dmitri <dsmirnov@interbase.com>,
     Sriram <bsriram@interbase.com>
CC: michael <mmelnikov@interbase.com>, stie@interbase.com

Hi Folks:

        there used to be a base code problem which domain declared like
        the following:

        DOM20D         CHAR(20) Nullable
                       check (value in (select river from rivers))

        The problem was instead the engine should evaluate the content
        of VALUE, it evaluates the content of a field/column, The
        problem was fixed by Chris and now the correct error message
        was issued for DSQL_DOMAIN_22.

        In the past, the engine issued the following error message:

                validation error for column FLD8, value "*** null ***"

        for the following insert statement:

                insert into tab20a (fld1, fld3, fld8)
                                values (200, '01/01/2050', null);

        Table TAB20A was created like the following:

                create table tab20a (fld1 dom20a,
                                    fld2 dom20b,
                                    fld3 dom20c,
                                    fld4 dom20d,
                                    fld5 dom20e,
                                    fld6 dom20f,
                                    fld7 dom20g,
                                    fld8 dom20h);

        Domain DOM20D and DOM20H were created as the following:

                FLD4    CHAR(20) Nullable
                        check (value in (select river from rivers))

                FLD8    DOUBLE PRECISION Not Null default 1000

        Because there was no null value in the river column, The old IB
        engine should catch the insert problem of FLD4, but it did not
        and caught the problem in FLD8.

        Chris fixed the old problem and now caught the insert problem
        of FLD4. Since IB engine once it detected an error, it bailed
        out right away, and did not continue validating the rest of the
        problem within the insert statement. Therefore it issues
        the error message of FLD4 before FLD8.

        The solution is to re-init test case DSQL_DOMAIN_22. I will
        re-init the test case.

        Bie Tie
